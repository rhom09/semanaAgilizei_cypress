var e,t=require("path"),n=(e=t)&&"object"==typeof e&&"default"in e?e.default:e,i=require("mime"),r=Object.freeze({subjectType:"input",force:!1,allowEmpty:!1}),o=Object.freeze({INPUT:"input",DRAG_N_DROP:"drag-n-drop"}),s={};s[o.INPUT]=["change"],s[o.DRAG_N_DROP]=["dragstart","drag","dragenter","drop","change","dragleave","dragend"];var a={message:'"subjectType" is not valid',tip:'Please look into docs to find supported "subjectType" values'},l={message:'"force" is not valid',tip:'Please look into docs to find supported "force" values'},f={message:'"allowEmpty" is not valid',tip:'Please look into docs to find supported "allowEmpty" values'},c={message:'"file encoding" is not valid',tip:'Please look into docs to find supported "encoding" values'},p={message:'"filePath" is not valid',tip:'Please look into docs to find supported "filePath" values'},u={message:'"mimeType" is not valid',tip:'Please look into docs to find supported "mimeType" values'},m={message:"given fixture file is empty",tip:'Please make sure you provide correct file or explicitly set "allowEmpty" to true'},d={message:'missing "filePath" or "fileName"',tip:'Please make sure you are passing either "filePath" or "fileName"'},y=function(e){function t(n){for(var i=[],r=arguments.length-1;r-- >0;)i[r]=arguments[r+1];e.apply(this,i),e.captureStackTrace&&e.captureStackTrace(this,t),this.name="[cypress-file-upload error]",this.message=n.message+".\n"+n.tip}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Error),T=Object.freeze({ASCII:"ascii",BASE64:"base64",BINARY:"binary",HEX:"hex",LATIN1:"latin1",UTF8:"utf8",UTF_8:"utf-8",UCS2:"ucs2",UCS_2:"ucs-2",UTF16LE:"utf16le",UTF_16LE:"utf-16le"}),v=Object.freeze({JSON:"json",JS:"js",COFFEE:"coffee",HTML:"html",TXT:"txt",CSV:"csv",PNG:"png",JPG:"jpg",JPEG:"jpeg",GIF:"gif",TIF:"tif",TIFF:"tiff",ZIP:"zip",PDF:"pdf",VCF:"vcf",SVG:"svg",XLS:"xls",XLSX:"xlsx",DOC:"doc",DOCX:"docx",MP3:"mp3"}),g=Object.values(T),h={};h[T.ASCII]=function(e){return Cypress.Promise.resolve(e)},h[T.BASE64]=function(e,t){return Cypress.Blob.base64StringToBlob(e,t)},h[T.BINARY]=function(e,t){return Cypress.Blob.binaryStringToBlob(e,t)},h[T.HEX]=function(e){return Cypress.Promise.resolve(e)},h[T.LATIN1]=function(e){return Cypress.Promise.resolve(e)},h[T.UTF8]=function(e){return Cypress.Promise.resolve(e)},h[T.UTF_8]=function(e){return Cypress.Promise.resolve(e)},h[T.UCS2]=function(e){return Cypress.Promise.resolve(e)},h[T.UCS_2]=function(e){return Cypress.Promise.resolve(e)},h[T.UTF16LE]=function(e){return Cypress.Promise.resolve(e)},h[T.UTF_16LE]=function(e){return Cypress.Promise.resolve(e)};var C={};C[v.JSON]=T.UTF8,C[v.JS]=T.UTF8,C[v.COFFEE]=T.UTF8,C[v.HTML]=T.UTF8,C[v.TXT]=T.UTF8,C[v.CSV]=T.UTF8,C[v.PNG]=T.BASE64,C[v.JPG]=T.BASE64,C[v.JPEG]=T.BASE64,C[v.GIF]=T.BASE64,C[v.TIF]=T.BASE64,C[v.TIFF]=T.BASE64,C[v.ZIP]=T.BASE64,C[v.PDF]=T.UTF8,C[v.VCF]=T.UTF8,C[v.SVG]=T.UTF8,C[v.XLS]=T.BINARY,C[v.XLSX]=T.BINARY,C[v.DOC]=T.BINARY,C[v.DOCX]=T.BINARY,C[v.MP3]=T.BINARY;var P=T.UTF8;Cypress.Commands.add("attachFile",{prevSubject:!0},function(e,T,w){var E,b,F=(void 0===(E=w)&&(E={}),void 0===(b=r)&&(b={}),Object.assign({},b,E)),S=F.subjectType,N=F.force,I=F.allowEmpty;!function(e){var t=e.subjectType,n=e.force,i=e.allowEmpty;if(-1===Object.values(o).indexOf(t))throw new y(a);if("boolean"!=typeof n)throw new y(l);if("boolean"!=typeof i)throw new y(f)}({subjectType:S,force:N,allowEmpty:I});var U,j="string"==typeof(U=T)?{filePath:U,encoding:"",mimeType:"",fileName:n.basename(U)}:{filePath:U.filePath,encoding:U.encoding||"",mimeType:U.mimeType||"",fileName:U.fileName||n.basename(U.filePath),fileContent:U.fileContent};!function(e){var t=j.filePath,n=j.fileName,i=j.encoding,r=j.mimeType,o=j.fileContent;if(i&&!g.includes(i))throw new y(c);if("string"!=typeof t&&!o)throw new y(p);if("string"!=typeof r)throw new y(u);if(!t&&!n)throw new y(d)}();var A=j.filePath,O=j.encoding,B=j.fileName,_=j.mimeType||function(e){var n=t.extname(e).slice(1);return i.getType(n)}(A),x=O||function(e){var n=t.extname(e).slice(1);return C[n]||P}(A),L=N||function(e){return!("chrome"===(t=Cypress.browser).name&&t.majorVersion<73&&function(e){if(!e)throw new Error("Element cannot be empty");return Cypress.dom.isAttached(e)&&Cypress.dom.isVisible(e)}(e))||function(e){if(!e)throw new Error("Element cannot be empty");return Cypress.dom.isDetached(e)}(e);var t}(e);return Cypress.cy.window({log:!1}).then(function(n){return function(e){var t=e.filePath,n=e.fileContent,i=e.fileEncoding;return n?Cypress.Promise.resolve(n):Cypress.cy.fixture(t,i)}({filePath:A,fileContent:j.fileContent,fileEncoding:x}).then(function(i){return function(e){var n=e.fileName,i=e.fileContent,r=e.mimeType,o=e.window;return(0,h[e.encoding])(i,r).then(function(e){var s=e;return t.extname(n).slice(1)===v.JSON&&(s=JSON.stringify(i,null,2)),new o.File([s],n,{type:r})})}({fileContent:i,fileName:B,mimeType:_,encoding:x,window:n}).then(function(t){(function(e,t){if(!t&&0===e.size)throw new y(m)})(t,I),function(e,t){var n=t.file,i=t.subjectType,r=t.force,a=new t.window.DataTransfer;if(a.items.add(n),i===o.INPUT){var l=e[0];l.files&&l.files.length>0&&Array.prototype.forEach.call(l.files,function(e){return a.items.add(e)}),l.files=a.files}if(r){var f=s[i],c={bubbles:!0,cancelable:!0,detail:a};try{f.forEach(function(t){var n=new CustomEvent(t,c);Object.assign(n,{dataTransfer:a}),e[0].dispatchEvent(n)})}catch(e){}}}(e,{file:t,subjectType:S,force:L,window:n}),Cypress.log({name:"attachFile",displayName:"FILE",message:t.name})})})}),Cypress.cy.wrap(e,{log:!1})});
//# sourceMappingURL=bundle.js.map
